<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1251">

</HEAD>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<H1><A NAME="idh_bso"></A>Буфер отправки системы Binkley</H1>

<P>Этот раздел раскрывает принципы структуры буфера системы Binkley (Binkley-style outbound).</P>

<P>Буфер отправки системы Binkley был впервые применен в почтовой системе <I>BinkleyTerm by Bit Bucket Software</I>, после чего стал одним из стандартов де-факто для систем подобного рода.</P>

<P>Буфер системы Binkley служит для определения файлов, подлежащийх отправки. Кроме буфера Binkley, файлы можно отправить, используя <A HREF="fileboxes.html">файл-боксы</A>.</P>

<P>Буфер системы Binkley представляет собой определенную структуру каталогов, содержащую файлы, подлежащие отправке. Буфер для текущей зоны (<A HREF="pn.html#idht_cfgpndefzone">Default outbound zone</A>) располагается в каталоге, указанном в поле Outbound <A HREF="pn.html">окна настройки каталогов</A>. Буфера для других зон содержатся в каталогах с такими же именами, как и для текущей зоны, с одним лишь отличием, что в поле расширения их имени содержатся три шестнадцатеричных цифры, представляющие 12-битое число, являющееся номером соответствующей зоны. Вот откуда растут корни ограничения максимального номера зоны числом 4095 (FFF в шестнадцатеричной системе).</P>

<TABLE cols=2 width=506>

<TR VALIGN="top">
<TD width=25%><CODE>OUTBOUND</CODE></TD>
<TD width=75%>Буфер для текущей зоны (<A HREF="pn.html#idht_cfgpndefzone">Default outbound zone</A>)</TD>
</TR>

<TR VALIGN="top">
<TD width=25%><CODE>OUTBOUND.001</CODE></TD>
<TD width=75%>Буфер для зоны 1 (Северная Америка)</TD>
</TR>

<TR VALIGN="top">
<TD width=25%><CODE>OUTBOUND.03F</CODE></TD>
<TD width=75%>Буфер для зоны 63 (3F в шестнадцатеричной системе)</TD>
</TR>
</TABLE><BR>

<P>В буфере зоны располагаются пакеты, предназначенные для узлов этой зоны.</P>

<P>Пакеты подразделяются по типу приоритетности и по способу привязки. </P>

<P>Система Аргус поддерживает четыре типа приоритетности, перечисленные в порядке уменьшения приоритетности: Crash, Direct, Normal и Hold. Имена типов имеют больше историческое, чем практическое значение.</P>

<P>По способу привязки, пакеты подразделяются на <I>прямые почтовые</I> и <I>списки привязанных файлов</I>.</P>

<TABLE cols=5 width=551>

<TR VALIGN="top">
<TD width=18%>Тип</TD>
<TD width=18%>Инициирует прозвонку</TD>
<TD width=21%>Передается при исходящем соединении</TD>
<TD width=21%>Расширение прямого почтового пакета</TD>
<TD width=22%>Расширение списка привязанных файлов</TD>
</TR>

<TR VALIGN="top">
<TD width=18%>Crash</TD>
<TD width=18%>да</TD>
<TD width=21%>да</TD>
<TD width=21%>CUT</TD>
<TD width=22%>CLO</TD>
</TR>

<TR VALIGN="top">
<TD width=18%>Direct</TD>
<TD width=18%>да</TD>
<TD width=21%>да</TD>
<TD width=21%>DUT</TD>
<TD width=22%>DLO</TD>
</TR>

<TR VALIGN="top">
<TD width=18%>Normal</TD>
<TD width=18%>нет</TD>
<TD width=21%>да</TD>
<TD width=21%>OUT</TD>
<TD width=22%>FLO</TD>
</TR>

<TR VALIGN="top">
<TD width=18%>Hold</TD>
<TD width=18%>нет</TD>
<TD width=21%>нет (зависит от <A HREF="cfgppolls.html">Transmit Hold on outgoing</A>).</TD>
<TD width=21%>HUT</TD>
<TD width=22%>HLO</TD>
</TR>
</TABLE><BR>

<P>Прямой почтовый пакет это ничто иное, как стандартный FTS-0001 пакет сообщений, который, перед отправкой удаленной системе, переименовывается в файл с расширением PKT и именем, состоящим из восьми случайных шестнадцатеричных цифр.</P>

<P>Список привязанных файлов — это текстовый файл, содержащий строки, каждая из которых несет путь к файлу, подлежащему отправке. После успешной отправки файл может быть удален (если в строке перед путем к файлу стоит символ <CODE>^</CODE>) или урезан до нулевого размера (если в строке перед путем к файлу стоит символ <CODE>#</CODE>).</P>

<P>Имя файла пакета из буфера отправки состоит из восьми шестнадцатеричных цифр, первые четыре из которых представляют 32-битный номер сети соответствующей зоны, а остальные четыре - 32-битный номер узла. Отсюда и природа числа 65535, как максимальное значение номера сети и узла. </P>

<P>Рассмотрим типичный пакет с именем — <CODE>01D50026.CLO</CODE>, являющийся списком привязанных файлов, подлежащий отправке на узел 469/38 с приоритетом Crash.</P>

<TABLE cols=2 width=412>

<TR VALIGN="top">
<TD width=14%>
<PRE><CODE>01D5</CODE></PRE>
</TD>
<TD width=86%>шестнадцатеричное число 469 — номер сети</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>
<PRE><CODE>0026</CODE></PRE>
</TD>
<TD width=86%>шестнадцатеричное число 38 — номер узла</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>
<PRE><CODE>.CLO</CODE></PRE>
</TD>
<TD width=86%>список привязанных файлов с приоритетом Crash</TD>
</TR>
</TABLE><BR>

<P>Допустим, этот файл содержит строки:</P>

<PRE><CODE>#e:\fido\outbound\0000040.tu3
^d:\work\source\help\argus\hlpsrc.rar
e:\fido\staff\mw(all).rar</CODE></PRE>

<P>Это значит, что на узел будет передано 3 файла, причем <CODE>e:\fido\outbound\0000040.tu3</CODE> после передачи будет урезан до нулевого размера, а <CODE>d:\work\source\help\argus\hlpsrc.rar</CODE> после передачи будет удален.</P>

<P>Для отправки определенным пойнтам узла, в соответствующем буфере (основном или для конкретной зоны) создается каталог с расширением <CODE>.PNT</CODE>, имя которого, по аналогии с именем пакета, представляет собой шестнадцатеричный номер сети и узла. В этот каталог помещаются прямые почтовые пакеты и списки привязанных файлов. Имя каталога представляет шестнадцатеричный номер пойнта соответствующего узла. Например, пакет с именем 0000001e.CUT, вложенный в каталог 01D50066.PNT, будет отправлен пойнту 469/102.30</P>

<P>Кроме пакетов, в буфере отправки системы Binkley содержатся файлы следующих типов:</P>

<TABLE cols=2 width=642>

<TR VALIGN="top">
<TD width=8%>.BSY</TD>
<TD width=92%>Индикатор занятости узла.</TD>
</TR>

<TR VALIGN="top">
<TD width=8%>.REQ</TD>
<TD width=92%>Список файлов, запрашиваемых у удаленного узла</TD>
</TR>

<TR VALIGN="top">
<TD width=8%>.HRQ</TD>
<TD width=92%>Список файлов, запрошенных удаленным узлом</TD>
</TR>
</TABLE><BR>

<P>Для управления буфером отправки преусмотрен специальный инструмент - <A HREF="smartmenu.html">SmartMenu</A>.</P>

</BODY>
</HTML>
