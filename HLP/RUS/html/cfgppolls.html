<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1251">

</HEAD>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<H1><A NAME="idh_cfgppolls"></A>Конфигурация прозвонок</H1>

<h2>Периодические прозвонки</h2>

<P>Аргус имеет возможность периодического создания прозвонок, используя механизм <A HREF="cron.html">Cron</A>. Такие прозвонки называются периодическими и задаются на страничке Periodical диалогового окна <A HREF="mnuconfig.html">Config /</A> Polls. Прозвонки, созданные по Cron, аналогичны прозвонкам, созданным по появлению пакетов с приоритетом Crash или Direct, и завершается после удачного исходящего сеанса связи с назначенным узлом. Возникновение периодической прозвонки в момент, когда прозвонка на данный адрес уже существует, служит сигналом обнуления всех счетчиков этой прозвонки. Обнуляемыми счетчиками являются счетчик звонков, окончившихся приемом сигнала <CODE>BUSY</CODE>, счетчик звонков, окончившихся неудачным соединением <CODE>NO CARRIER</CODE> / <CODE>NO ANSWER</CODE>, и счетчик звонков, окончившихся обрывом сеанса связи из-за слишком большого количества ошибок или из-за потери несущей. См. также <A HREF="pollmgr.html">Менеджер прозвонок</A></P>

<h2>Параметры прозвонок</h2>

<P>Параметры прозвонок устанавливаются на страничке Options диалогового окна <A HREF="mnuconfig.html">Config /</A> Polls. Счетчики “Try Counters” содержат значения, по достижении который прозвонка переводится в режим Stand-off на время, указанное в поле “Stand-off minutes”. </P>

<P>Установленное значение “Transmit hold on outgoing” позволяет передавать на исходящем соединении пакеты с типом приоритетности “<A HREF="bso.html">Hold</A>”.</P>

<h2>Внешние прозвонки</h2>

<P>Внешние прозвонки предназначены для запуска внешних приложений вместо прозвонки на адрес, указанный в поле Address List диалога <A HREF="mnuconfig.html">Config /</A> Polls/External. По коду завершения приложения определяется успешность прозвонки. Формат поля Application идентичен используемому в <A HREF="mnuconfig.html">Config /</A> Externals/Doors или <A HREF="mnuconfig.html">Config /</A> Dial-up/Modems/External Fax Receiver, то есть работают все спецпараметры (handshake switches).</P>

<P>Кроме того, введены новые спецпараметры (и соответствующие переменные окружения):</P>

<TABLE cols=3 width=591>

<TR VALIGN="top">
<TD width=7%>
<PRE><CODE>%w</CODE></PRE>
</TD>
<TD width=25%>
<PRE><CODE>ARGUS_NODE</CODE></PRE>
</TD>
<TD width=68%>Адрес узла назначения внешней прозвонки, например "2:469/38".</TD>
</TR>

<TR VALIGN="top">
<TD width=7%>
<PRE><CODE>%x</CODE></PRE>
</TD>
<TD width=25%>
<PRE><CODE>ARGUS_STATION</CODE></PRE>
</TD>
<TD width=68%>Имя узла (станции), если узел известен в списке FTS-0005.</TD>
</TR>

<TR VALIGN="top">
<TD width=7%>
<PRE><CODE>%v</CODE></PRE>
</TD>
<TD width=25%>
<PRE><CODE>ARGUS_LOCATION</CODE></PRE>
</TD>
<TD width=68%>Географическое положение узла, если узел известен в списке FTS-0005.</TD>
</TR>

<TR VALIGN="top">
<TD width=7%>
<PRE><CODE>%X</CODE></PRE>
</TD>
<TD width=25%>
<PRE><CODE>ARGUS_SYSOP</CODE></PRE>
</TD>
<TD width=68%>Имя сисопа, если узел известен в списке FTS-0005.</TD>
</TR>

<TR VALIGN="top">
<TD width=7%>
<PRE><CODE>%y</CODE></PRE>
</TD>
<TD width=25%>
<PRE><CODE>ARGUS_PHONE</CODE></PRE>
</TD>
<TD width=68%>Номер телефона или IP-адрес (или имя хоста) из списка FTS-0005 или определений.</TD>
</TR>

<TR VALIGN="top">
<TD width=7%>
<PRE><CODE>%Y</CODE></PRE>
</TD>
<TD width=25%>
<PRE><CODE>ARGUS_FLAGS</CODE></PRE>
</TD>
<TD width=68%>Флаги узла из списка FTS-0005 или определений.</TD>
</TR>

<TR VALIGN="top">
<TD width=7%>
<PRE><CODE>%W</CODE></PRE>
</TD>
<TD width=25%>
<PRE><CODE>ARGUS_SPEED</CODE></PRE>
</TD>
<TD width=68%>Скорость узла, если узел известен в списке FTS-0005.</TD>
</TR>
</TABLE><BR>

<P>Формат поля options:</P>

<P><CODE>ДиапазонOk ДиапазонBusy ДиапазонNoC ДиапазонFail ТаймаутМинут ТаймаутКЗ</CODE></P>

<TABLE cols=2 width=637>

<TR VALIGN="top">
<TD width=21%>
<PRE><CODE>ДиапазонOk</CODE></PRE>
</TD>
<TD width=79%>диапазон кодов завершения, по которым прозвонка считается успешной.</TD>
</TR>

<TR VALIGN="top">
<TD width=21%>
<PRE><CODE>ДиапазонBusy</CODE></PRE>
</TD>
<TD width=79%>диапазон кодов завершения, по которым прозвонка считается завершившейся сигналом BUSY.</TD>
</TR>

<TR VALIGN="top">
<TD width=21%>
<PRE><CODE>ДиапазонNoC</CODE></PRE>
</TD>
<TD width=79%>диапазон кодов завершения, по которым прозвонка считается завершившейся вследствие неудачной попытки установки соединения.</TD>
</TR>

<TR VALIGN="top">
<TD width=21%>
<PRE><CODE>ДиапазонFail</CODE></PRE>
</TD>
<TD width=79%>диапазон кодов завершения, по которым прозвонка считается завершившейся вследствие неудачной попытки инициирования сеанса связи.</TD>
</TR>

<TR VALIGN="top">
<TD width=21%>
<PRE><CODE>ТаймаутМинут</CODE></PRE>
</TD>
<TD width=79%>максимально допустимое время для работы внешнего приложения. Если приложения не завершилось самостоятельно в течении этого периода, оно будет насильственно прервано, с кодом ошибки, установленным из переменной ТаймаутКЗ. Если значение ТаймаутКЗ пропущено, то может быть пропущено и значение ТаймаутМинут - в этом случает будет использоваться число 1, то есть приложение будет прервано черед одну минуту с кодом ТаймаутКЗ.</TD>
</TR>

<TR VALIGN="top">
<TD width=21%>
<PRE><CODE>ТаймаутКЗ</CODE></PRE>
</TD>
<TD width=79%>код завершения внешнего приложения по истечении времени, определенном переменной ТаймаутМинут. Значение ТаймаутКЗ может быть пропущено, в этом случае внешнее приложение сможет завершиться только по самостоятельному выходу, либо непосредственно перед завершением работы самой системы Аргус.</TD>
</TR>
</TABLE><BR>

<P>В "Диапазонах" можно использовать перечисления и интервалы (как в cron), например "1,3,9-15". Символ точка (".") является пустым диапазоном. </P>

<P>Если код завершения находится вне всех четырех диапазонов, то такая прозвонка считается успешной.</P>

<P>Пример поля Options:</P>

<P><CODE>. 1 2,5-7 3,4 10 2</CODE></P>

<P>Это означает, что прозвонка считается Busy, если приложение завершилось с кодом 1, NoC с кодами 2,5,6,7, и Fail с кодами 3,4. Иные коды завершения служат поводом для успешного завершения прозвонки. Под время работы приложения отводится максимум 10 минут, если приложение не завершилось по истечении 10 минут самостоятельно, оно будет прервано с кодом завершения 2, который, в данном случае, находится в диапазоне NoC.</P>

</BODY>
</HTML>
